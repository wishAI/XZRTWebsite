// Generated by CoffeeScript 1.11.1
(function() {
  var getUploadProgressInfo, onUploadComplete, onUploadFailed, onUploadProgress;

  $(document).ready(function() {
    setInterval(getUploadProgressInfo, 500);
    $("#btnUpload").on("click", function() {
      var file, formData;
      formData = new FormData();
      file = $("#files")[0].files[0];
      formData.append("testFile", file);
      return $.ajax({
        type: "POST",
        url: "/file/doUpload",
        data: formData,
        success: function(data) {
          return $("#result").text(data);
        },
        contentType: false,
        processData: false
      });
    });
    return $("#btnTest").on("click", function() {
      return getUploadProgressInfo();
    });
  });

  getUploadProgressInfo = function() {
    return $.ajax({
      type: "GET",
      url: "/info/upload",
      success: function(data) {
        return $("#progress").text(data);
      }
    });
  };


  /*
  $.post "/file/doUpload", {testFile:file}, (data)->
    myObject = JSON.parse(data)
    $("#result").text(myObject["id"])
   */


  /*
  upload = ->
  xhr = new XMLHttpRequest()
  fd = new FormData()
  file = document.getElementById("files").files[0]
  fd.append("testFile", file)
  xhr.upload.addEventListener("progress", onUploadProgress, false)
  xhr.addEventListener("load", onUploadComplete, false)
  xhr.addEventListener("error", onUploadFailed, false)
  xhr.open("POST", "/file/doUpload")
  xhr.send(fd)
  return
   */

  onUploadProgress = function(evt) {
    var progressInfo;
    if (evt.lengthComputable) {
      progressInfo = document.getElementById("progress");
      return progressInfo.innerHTML = evt.loaded;
    }
  };

  onUploadComplete = function() {};

  onUploadFailed = function() {};

}).call(this);

//# sourceMappingURL=uploadPage.js.map
